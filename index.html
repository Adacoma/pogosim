<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Pogosim: Pogosim &lt;img src=&quot;https://github.com/Adacoma/pogosim/actions/workflows/ci.yaml/badge.svg&quot; alt=&quot;Badge CI&quot;/&gt; &lt;img src=&quot;https://img.shields.io/badge/version-v0.10.8-blue&quot; alt=&quot;Version&quot;/&gt;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Pogosim
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('index.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Pogosim <img src="https://github.com/Adacoma/pogosim/actions/workflows/ci.yaml/badge.svg" alt="Badge CI" style="pointer-events: none;" class="inline"/> <img src="https://img.shields.io/badge/version-v0.10.8-blue" alt="Version" class="inline"/> </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a></p>
<p>Pogosim is a simulator for the <a href="https://pogobot.github.io/">Pogobot robots</a>. It aims to reproduce the C API used on the robots, so that the exact same code can be used in simulations as in robotic experiments. An extensive description of the Pogosim can be found in this <a href="https://arxiv.org/pdf/2509.10968">article</a> or <a href="https://www.researchgate.net/publication/395526571_Pogosim_--_a_Simulator_for_Pogobot_robots">here (RG link)</a>. The full Doxygen documentation of Pogosim can be found <a href="https://adacoma.github.io/pogosim/">here</a>.</p>
<p>Pogosim is coded in C++20 and C17, using SDL2 and Box2D 3.0.</p>
<h1><a class="anchor" id="autotoc_md119"></a>
Overview</h1>
<p>Here are the simulated runs of several examples (C code found [here](examples)). <img src="https://github.com/Adacoma/pogosim/blob/main/.description/gallery.gif" alt="gallery" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md120"></a>
Install on Linux</h1>
<p>To install it on <em>Debian/Ubuntu</em> (tested: 24.04 LTS), use the following commands. The process will be similar on other Linux distributions.</p>
<p>First, install the necessary packages: </p><div class="fragment"><div class="line">sudo apt-get update &amp;&amp; sudo apt-get install -y --no-install-recommends \</div>
<div class="line">    build-essential cmake git libboost-system-dev \</div>
<div class="line">    libsdl2-dev libsdl2-image-dev libsdl2-gfx-dev libsdl2-ttf-dev \</div>
<div class="line">    libyaml-cpp-dev libspdlog-dev libfmt-dev \</div>
<div class="line">    wget unzip ca-certificates lsb-release</div>
<div class="line"> </div>
<div class="line"># Install Apache Arrow</div>
<div class="line">wget https://apache.jfrog.io/artifactory/arrow/$(lsb_release --id --short | tr &#39;A-Z&#39; &#39;a-z&#39;)/apache-arrow-apt-source-latest-$(lsb_release --codename --short).deb</div>
<div class="line">sudo apt install -y -V ./apache-arrow-apt-source-latest-$(lsb_release --codename --short).deb</div>
<div class="line">sudo apt update</div>
<div class="line">sudo apt install -y -V libarrow-dev</div>
</div><!-- fragment --><p>Then compile and install Box2D 3.0: </p><div class="fragment"><div class="line">git clone https://github.com/erincatto/box2d.git</div>
<div class="line">cd box2d</div>
<div class="line">git checkout 28adacf82377d4113f2ed00586141463244b9d10</div>
<div class="line">mkdir build &amp;&amp; cd build</div>
<div class="line">cmake -DBOX2D_BUILD_DOCS=OFF -DGLFW_BUILD_WAYLAND=OFF -DCMAKE_INSTALL_PREFIX=/usr  ..</div>
<div class="line">cmake --build .</div>
<div class="line">sudo make install</div>
<div class="line">cd ../..</div>
</div><!-- fragment --><p>Clone the pogosim repository, compile pogosim and install it: </p><div class="fragment"><div class="line">git clone https://github.com/Adacoma/pogosim.git</div>
<div class="line">cd pogosim</div>
<div class="line">./build.sh </div>
</div><!-- fragment --><p><b>REMEMBER TO ALWAYS RECOMPILE with "./build.sh" after downloading a new version of Pogosim!</b></p>
<p>Note that some (optional) advanced examples need the <a href="https://github.com/Adacoma/pogo-utils">pogo-utils</a> library &ndash; see below section "Simple way to create a new pogobot/pogosim project" to know how to register associated environment variables so that the Makefiles can assess pogo-utils. If pogo-utils is not present, those examples won't be compiled, but the rest of Pogosim will compile without errors.</p>
<h1><a class="anchor" id="autotoc_md121"></a>
Install on WSL</h1>
<p>Just follow the previous section to install on Ubuntu 24.04+ using WSL. If the simulator is really slow, it may be due to a bug with SDL2 on WSL, as explained <a href="https://github.com/libsdl-org/SDL/issues/6333#issuecomment-1293872149">here</a> and <a href="https://github.com/lem-project/lem/issues/1332">here</a>. If this is the case, just add: </p><div class="fragment"><div class="line">export SDL_RENDER_DRIVER=software</div>
<div class="line">export LIBGL_ALWAYS_SOFTWARE=1</div>
</div><!-- fragment --><p> before launching the simulator.</p>
<p><b>REMEMBER TO ALWAYS RECOMPILE with "./build.sh" after downloading a new version of Pogosim!</b></p>
<p>Note that some (optional) advanced examples need the <a href="https://github.com/Adacoma/pogo-utils">pogo-utils</a> library &ndash; see below section "Simple way to create a new pogobot/pogosim project" to know how to register associated environment variables so that the Makefiles can assess pogo-utils. If pogo-utils is not present, those examples won't be compiled, but the rest of Pogosim will compile without errors.</p>
<h1><a class="anchor" id="autotoc_md122"></a>
Install on MacOSX</h1>
<p>The installation requires brew to be installed on your computer, cf brew documentation <a href="https://brew.sh/">here</a>.</p>
<p>You can then install the necessary packages to compile Pogosim: </p><div class="fragment"><div class="line">brew install cmake boost sdl2 sdl2_image sdl2_gfx sdl2_ttf yaml-cpp spdlog apache-arrow pkg-config fmt</div>
</div><!-- fragment --><p>Then compile and install Box2D 3.0: </p><div class="fragment"><div class="line">git clone https://github.com/erincatto/box2d.git</div>
<div class="line">cd box2d</div>
<div class="line">git checkout 28adacf82377d4113f2ed00586141463244b9d10</div>
<div class="line">mkdir build &amp;&amp; cd build</div>
<div class="line">cmake -DBOX2D_BUILD_DOCS=OFF -DGLFW_BUILD_WAYLAND=OFF -DCMAKE_INSTALL_PREFIX=/usr/local -DCMAKE_INSTALL_LIBDIR=/usr/local/lib -DCMAKE_INSTALL_INCLUDEDIR=/usr/local/include ..</div>
<div class="line">cmake --build .</div>
<div class="line">sudo make install</div>
<div class="line">cd ../..</div>
</div><!-- fragment --><p>Clone the pogosim repository, compile pogosim and install it: </p><div class="fragment"><div class="line">git clone https://github.com/Adacoma/pogosim.git</div>
<div class="line">cd pogosim</div>
<div class="line">./build.sh </div>
</div><!-- fragment --><p><b>REMEMBER TO ALWAYS RECOMPILE with "./build.sh" after downloading a new version of Pogosim!</b></p>
<p>Note that some (optional) advanced examples need the <a href="https://github.com/Adacoma/pogo-utils">pogo-utils</a> library &ndash; see below section "Simple way to create a new pogobot/pogosim project" to know how to register associated environment variables so that the Makefiles can assess pogo-utils. If pogo-utils is not present, those examples won't be compiled, but the rest of Pogosim will compile without errors.</p>
<h1><a class="anchor" id="autotoc_md123"></a>
Quickstart</h1>
<h2><a class="anchor" id="autotoc_md124"></a>
Launch example codes</h2>
<p>Example codes are compiled every time you launch the "./build.sh" script, alongside the rest of the Pogosim code.</p>
<p>To launch examples code you can use the following commands: </p><div class="fragment"><div class="line">./examples/helloworld/helloworld -c conf/simple.yaml                    # Hello world, just robots rotating left then right. The first robot prints &quot;HELLO WORLD !&quot; messages</div>
<div class="line">./examples/run_and_tumble/run_and_tumble -c conf/simple.yaml            # A very simple implementation of the run-and-tumble algorithm for locomotion</div>
<div class="line">./examples/hanabi/hanabi -c conf/simple.yaml                            # A simple code to showcase the diffusion of information in a swarm. Immobile robots by default (uncomment &quot;MOVING_ROBOTS&quot; to make then move)</div>
<div class="line">./examples/phototaxis/phototaxis -c conf/phototaxis.yaml                # An example showcasing phototaxis, with a fixed light spot in the middle of the arena</div>
<div class="line">./examples/walls/walls -c conf/walls_and_membranes.yaml                 # An multi-controller example where robots can identify the presence of fixed walls (through Pogowalls) or mobile walls (through membranes).</div>
<div class="line">./examples/ssr/ssr -c conf/ssr.yaml                                     # More complex example. &quot;Simple&quot; implementation of the SSR algorithm from https://arxiv.org/abs/2403.17147  You can test it for a disk and annulus arena (see conf/ssr.yaml to change the arena).</div>
<div class="line">./examples/coverage_neighbors_novelty/coverage_neighbors_novelty -c conf/coverage_neighbors_novelty.yaml   # More complex run-and-tumble example, with two objectives: neighbor novelty, and isolation avoidance (as a proxy to global coverage)</div>
<div class="line">./examples/IMU/IMU -c conf/simple.yaml                                  # A run-and-tumble example showing how to retrieve IMU information (gyroscope, accelerometer, temperature sensor)</div>
<div class="line">./examples/push_sum/push_sum -c conf/simple.yaml                        # Canonical example of the push-sum gossip algorithm.</div>
<div class="line">./examples/moving_oscillators/moving_oscillators -c conf/simple.yaml    # Showcases a Kuramoto-style moving oscillators swarm achieving synchronization. The robots move according to a run-and-tumble algorithm.</div>
<div class="line">./examples/lighthouse_localization/lighthouse_localization -c conf/lighthouse.yaml  # Robot estimate their X,Y position using two rotating lighthouse inspired by the **Valve SteamVR** tracking system, often used with drone localization.</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md125"></a>
Simple way to create a new pogobot/pogosim project</h2>
<p>Just copy the directory "template\_prj": </p><div class="fragment"><div class="line">cp -R template_prj ~/my_new_pogo_prj</div>
</div><!-- fragment --><p><em>Option 1</em>: Create simlinks to the necessary libraries: </p><div class="fragment"><div class="line">cd ~/my_new_pogo_prj</div>
<div class="line">ln -s PATH/TO/pogosim       # https://github.com/Adacoma/pogosim</div>
<div class="line">ln -s PATH/TO/pogobot-sdk   # https://github.com/nekonaute/pogobot-sdk</div>
<div class="line">ln -s PATH/TO/pogo-utils    # If you use pogo-utils in your project. https://github.com/Adacoma/pogo-utils</div>
</div><!-- fragment --><p><em>Option 2</em>: Set environment variables to link to necessary libraries: Add the following lines in the configuration file of your shell (e.g. ~/.bashrc for BASH or ~/.zshrc for ZSH): </p><div class="fragment"><div class="line">export POGO_SDK=/ABSOLUTE/PATH/TO/pogobot-sdk</div>
<div class="line">export POGOSIM_INCLUDE_DIR=/ABSOLUTE/PATH/TO/pogosim/src</div>
<div class="line">export POGOUTILS_INCLUDE_DIR=/ABSOLUTE/PATH/TO/pogo-utils/src</div>
</div><!-- fragment --><p><em>Option 3</em>: Edit the Makefile so that the following variables contain the paths to the necessary libraries: </p><div class="fragment"><div class="line">POGO_SDK?=PATH/TO/pogobot-sdk</div>
<div class="line">POGOSIM_INCLUDE_DIR?=PATH/TO/pogosim/src</div>
<div class="line">POGOUTILS_INCLUDE_DIR?=PATH/TO/pogo-utils/src</div>
</div><!-- fragment --><p>After using any of these 3 options, you can compile the project: </p><div class="fragment"><div class="line">make clean sim  # To compile the simulation</div>
<div class="line"># OR</div>
<div class="line">make clean bin  # To compile the binary for real Pogobots</div>
<div class="line"># OR</div>
<div class="line">make clean all  # To compile both the simulation and Pogobot binaries</div>
</div><!-- fragment --><p>By default, the name of the created simulation binary corresponds to the name of the parent directory of the project. You can then launch it using: </p><div class="fragment"><div class="line">make clean sim</div>
<div class="line">./template_prj -c conf/test.yaml        # If the parent directory is &quot;template_prj&quot;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md126"></a>
Controlling the GUI</h2>
<p>Here is a list of shortcuts that can be used to control the GUI:</p><ul>
<li>F1: Help message</li>
<li>F3: Slow down the simulation</li>
<li>F4: Speed up the simulation</li>
<li>F5: Show/Hide the communication channels</li>
<li>F6: Show/Hide the lateral LEDs</li>
<li>F7: Show/Hide the light level</li>
<li>ESC: quit the simulation</li>
<li>SPACE: pause the simulation</li>
<li>DOWN, UP, LEFT, RIGHT: move the visualisation coordinates</li>
<li>Right-Click + Mouse move: move the visualisation coordinates</li>
<li>PLUS, MINUS or Mouse Wheel: Zoom up or down</li>
<li>0: Reset the zoom and visualization coordinates</li>
</ul>
<h2><a class="anchor" id="autotoc_md127"></a>
Compile a binary for the real Pogobots</h2>
<p>Download the <a href="https://github.com/nekonaute/pogobot-sdk">pogobot-SDK</a> somewhere: </p><div class="fragment"><div class="line">git clone https://github.com/nekonaute/pogobot-sdk.git</div>
</div><!-- fragment --><p>Edit "~/my\_pogobot\_project/Makefile" to set the path of the pogobot-sdk: change the value of variable "POGO\_SDK".</p>
<p>Use the following commands to compile the binary: </p><div class="fragment"><div class="line">cd ~/my_pogobot_project</div>
<div class="line">make clean &amp;&amp; make bin</div>
</div><!-- fragment --><p>The binary should be compiled correctly, and you can then use the usual commands to upload it to a robot. E.g. through: </p><div class="fragment"><div class="line">make connect TTY=/dev/ttyUSB0</div>
</div><!-- fragment --><p> Inside the robot prompt, type "enter" to obtain a new prompt line. If you connect to the robot through a Progboard, you can use the command "serialboot" to upload the code. Cf the <a href="https://github.com/nekonaute/pogobot-sdk">pogobot-SDK documentation</a> for more details. If you use the IR remote device, follow the instructions described <a href="https://github.com/nekonaute/pogobot/blob/main/readme-irRemote.md">here</a>.</p>
<h3><a class="anchor" id="autotoc_md128"></a>
Compiling binaries for multi-categories projects</h3>
<p>Note that if the project involve several robot categories that each have a different code (e.g. example "./examples/walls" where Pogobots, Pogowalls and Membranes have different code), it is possible to specify the category you want to compile for, using the following command: </p><div class="fragment"><div class="line">cd ~/my_pogobot_project</div>
<div class="line">make clean &amp;&amp; make bin ROBOT_CATEGORY=robots  # where &quot;ROBOT_CATEGORY&quot; is the category specified in the pogobot_start function.</div>
</div><!-- fragment --><p> Note that "robots" is the default category (e.g. with pogobot_start calls with only 2 arguments).</p>
<p>For instance, the following command can be used to compile the example code "./examples/walls" for Pogowalls: </p><div class="fragment"><div class="line">cd examples/walls</div>
<div class="line">make clean &amp;&amp; make bin ROBOT_CATEGORY=walls</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md129"></a>
Headless mode</h2>
<p>To launch your simulation in headless mode (while still exporting png files of the traces), use the "-g" command line parameter. E.g.: </p><div class="fragment"><div class="line">./my_pogobot_project -c conf/test.yaml -g</div>
</div><!-- fragment --><p> The simulator is far faster in headless mode than in windowed mode.</p>
<h2><a class="anchor" id="autotoc_md130"></a>
Command line parameters of the simulator</h2>
<div class="fragment"><div class="line">Usage: pogosim [options]</div>
<div class="line">Options:</div>
<div class="line">  -c, --config &lt;file&gt;             Specify the configuration file.</div>
<div class="line">  -g, --no-GUI                    Disable GUI mode.</div>
<div class="line">  -v, --verbose                   Enable verbose mode.</div>
<div class="line">  -nr, --do-not-show-robot-msg    Suppress robot messages.</div>
<div class="line">  -P, --progress                  Show progress output.</div>
<div class="line">  -V, --version                   Show version information.</div>
<div class="line">  -h, --help                      Display this help message.</div>
</div><!-- fragment --><ul>
<li>Parameter "-c" must always be provided, and corresponds to the YAML configuration file to use. See "conf/test.yaml" for an example.</li>
<li>Parameter "-g" enables headless mode: no GUI shown, but the program still export frames.</li>
<li>Parameter "-v" enables verbose mode (show debug messages).</li>
<li>Parameter "-nr" disables messages from the robots (printf in robot code).</li>
<li>Parameter "-P" displays a progress bar of the simulation, depending on the parameter value "simulation\_time" defined in the configuration file.</li>
</ul>
<h1><a class="anchor" id="autotoc_md131"></a>
Troubleshooting</h1>
<h2><a class="anchor" id="autotoc_md132"></a>
In headless/Pogobatch mode, I get an SDL-related error</h2>
<p>If you get this error: </p><div class="fragment"><div class="line">INFO: Failed to initialize SDL: offscreen not available  </div>
<div class="line">Error: Error while initializing SDL</div>
</div><!-- fragment --><p> It means that you compiled Pogosim with an SDL version &lt; 2.0.22. Headless mode is not available in this version of SDL. To have access to a newer version, you can:</p><ul>
<li>update your system.</li>
<li>use apptainer/singularity (cf related section below) to create an Ubuntu 24.04 image with a newer version of SDL.</li>
</ul>
<h1><a class="anchor" id="autotoc_md133"></a>
Access the pose and states of the robots in Python</h1>
<p>After a simulation is executed, it can periodically store the pose (position and orientation) and internal states of each robot into a data file. This feature can be enabled in the configuration file, with entries: </p><div class="fragment"><div class="line">enable_data_logging: true                   # Set to true to enable the generation of a data file</div>
<div class="line">data_filename: &quot;frames/data.feather&quot;        # Path of the generated data file</div>
<div class="line">save_data_period: 1.0       # In s          # Save data every 1.0 second</div>
</div><!-- fragment --><p>The data is stored as an Apache Arrow Feather file, a standard and convenient format to store large dataframes. As such, it can easily be imported in Python by using Pandas: </p><div class="fragment"><div class="line">import pandas as pd</div>
<div class="line">df = pd.read_feather(&quot;frames/data.feather&quot;)</div>
<div class="line">print(df)</div>
<div class="line"> </div>
<div class="line">       time robot_category  robot_id  pogobot_ticks         x         y       angle  </div>
<div class="line">0      1.00          walls     65535             63  5.001000  5.001000    0.000000  </div>
<div class="line">1      1.00      membranes     65534             63  6.824879  4.867349         NaN  </div>
<div class="line">2      1.00         robots         0             63  4.038734  0.959281    1.953128  </div>
<div class="line">3      1.00         robots         1             63  1.023770  8.115510    1.303922  </div>
<div class="line">4      1.00         robots         2             63  1.965905  3.455247   -2.005039  </div>
<div class="line">...     ...            ...       ...            ...       ...       ...         ...  </div>
<div class="line">1423  14.13         robots        95            884  0.654096  9.729611   -0.386542  </div>
<div class="line">1424  14.13         robots        96            884  8.011082  6.353422    1.812981  </div>
<div class="line">1425  14.13         robots        97            884  4.807075  7.854455    1.177420  </div>
<div class="line">1426  14.13         robots        98            884  4.021065  9.730083    1.626796  </div>
<div class="line">1427  14.13         robots        99            883  9.031286  1.299344   -0.168437  </div>
<div class="line"> </div>
<div class="line">[1428 rows x 7 columns]</div>
</div><!-- fragment --><p>Custom columns can be added into this file by using the callback mechanism. See examples "hanabi" (simple) and "ssr" (complex) for more information.</p>
<h1><a class="anchor" id="autotoc_md134"></a>
Launch several runs in Parallel, with different configuration options</h1>
<p>We provide Python scripts that can launch several runs of Pogosim in parallel, and compile the results from all runs into a single dataframe.</p>
<p>To install it, use the following command: </p><div class="fragment"><div class="line">pip install pogosim</div>
</div><!-- fragment --><p>Or, just you want to compile it yourself: </p><div class="fragment"><div class="line">cd scripts</div>
<div class="line">./setup.py sdist bdist_wheel</div>
<div class="line">pip install -U .</div>
<div class="line">cd ..</div>
</div><!-- fragment --><p>Afterwards, you can use the pogobatch script to launch several runs of simulation in parallel (or in a cluster), with a given configuration: </p><div class="fragment"><div class="line">pogobatch -c conf/test.yaml -S ./examples/hanabi/hanabi -r 10 -t tmp -o results</div>
</div><!-- fragment --><p> This command with launch 10 runs of the Hanabi example using configuration file conf/test.yaml. Temporary files of the runs will be stored in the "tmp" directory. After all runs are completed, the script will compile a dataframe of all results and save it into "results/result.feather". It can then be opened as described in previous section. An additional column "run" is added to the dataframe to distinguish results from the different runs.</p>
<p>It is also possible to launch the pogobatch script on several variations of a given configuration, e.g. with a list of different numbers of robots or arena. The list of possibly configuration combination is specified in the configuration file, by adding a subkey "batch\_options" with the list of possible values. E.g.: </p><div class="fragment"><div class="line">arena_file:        # Test the results on two arenas</div>
<div class="line">    batch_options: [&quot;arenas/disk.csv&quot;, &quot;arenas/arena8.csv&quot;]</div>
<div class="line">    default_option: arenas/disk.csv    # OPTIONAL: Value to use for &quot;arena_file&quot; when this configuration is used directly by the simulator, not pogobatch</div>
<div class="line">objects:</div>
<div class="line">    robots:</div>
<div class="line">        type: pogobot       # Category type pertaining to Pogobots</div>
<div class="line">        nb:                 # Number of objects (Pogobots) in this category</div>
<div class="line">            batch_options: [100, 200]          # Test the results on three different swarm sizes</div>
<div class="line">            default_option: arenas/disk.csv    # OPTIONAL: Value to use for &quot;objects.robots.nb&quot; when this configuration is used directly by the simulator, not pogobatch</div>
<div class="line">        geometry: disk                  # Pogobots are always disk-shaped</div>
<div class="line">        radius: 26.5                    # In mm</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"># Format of the generated dataframes, one for each configuration</div>
<div class="line">result_filename_format: &quot;result_{objects.robots.nb}.feather&quot;</div>
<div class="line"> </div>
<div class="line"># List of new columns to add in the generated dataframes</div>
<div class="line">result_new_columns: [&quot;arena_file&quot;]</div>
</div><!-- fragment --><p> These configuration entries specify that either 100 or 200 robots should be considered, on arenas "disk" and "8", resulting in 4 possibly configurations. The configuration entry "result\_filename\_format" corresponds to the name of a given configuration combination. See "conf/batch/test.yaml" for a complete example. The entry "result\_new\_columns" indicates which columns (and associated configurations) are <em>stored</em> inside feather files as additional columns.</p>
<p>You can use pogobatch script on this compounded configuration file to launch several runs on each configuration combination: </p><div class="fragment"><div class="line">pogobatch -c conf/batch/test.yaml -S ./examples/hanabi/hanabi -r 10 -t tmp -o results</div>
<div class="line"> </div>
<div class="line">Found 6 combination(s) to run.</div>
<div class="line">Task: Config file /home/syemn/data/prj/pogosim/tmp/combo_kdmvxpzf.yaml -&gt; Output: results/result_50.feather</div>
<div class="line">Task: Config file /home/syemn/data/prj/pogosim/tmp/combo_cqfk3lrl.yaml -&gt; Output: results/result_100.feather</div>
<div class="line">Task: Config file /home/syemn/data/prj/pogosim/tmp/combo_ckx7t160.yaml -&gt; Output: results/result_150.feather</div>
<div class="line">Task: Config file /home/syemn/data/prj/pogosim/tmp/combo_401kcmam.yaml -&gt; Output: results/result_50.feather</div>
<div class="line">Task: Config file /home/syemn/data/prj/pogosim/tmp/combo_wiilbu4e.yaml -&gt; Output: results/result_100.feather</div>
<div class="line">Task: Config file /home/syemn/data/prj/pogosim/tmp/combo_q3yxls9z.yaml -&gt; Output: results/result_150.feather</div>
<div class="line">Removed stale result file: results/result_50.feather</div>
<div class="line">Removed stale result file: results/result_150.feather</div>
<div class="line">Removed stale result file: results/result_100.feather</div>
<div class="line">Launch → tmp tmp/run_c03834a11a87406384efdcf8d2376dd4.feather  (will merge into results/result_50.feather)</div>
<div class="line">Combined data saved to tmp/run_c03834a11a87406384efdcf8d2376dd4.feather</div>
<div class="line">Created results/result_50.feather with 49500 rows</div>
<div class="line">Launch → tmp tmp/run_2628efb844fc4e2e83da56f7e98e8084.feather  (will merge into results/result_100.feather)</div>
<div class="line">Combined data saved to tmp/run_2628efb844fc4e2e83da56f7e98e8084.feather</div>
<div class="line">Created results/result_100.feather with 99000 rows</div>
<div class="line">Launch → tmp tmp/run_3c868b57dff0483c920ebf656b8c2eff.feather  (will merge into results/result_150.feather)</div>
<div class="line">Combined data saved to tmp/run_3c868b57dff0483c920ebf656b8c2eff.feather</div>
<div class="line">Created results/result_150.feather with 148500 rows</div>
<div class="line">Launch → tmp tmp/run_9e26f0240f8a4105aaf6851e5614ab93.feather  (will merge into results/result_50.feather)</div>
<div class="line">Combined data saved to tmp/run_9e26f0240f8a4105aaf6851e5614ab93.feather</div>
<div class="line">Appended 49500 rows to results/result_50.feather</div>
<div class="line">Launch → tmp tmp/run_143db3464fdd456c8cac379f621ae474.feather  (will merge into results/result_100.feather)</div>
<div class="line">Combined data saved to tmp/run_143db3464fdd456c8cac379f621ae474.feather</div>
<div class="line">Appended 99000 rows to results/result_100.feather</div>
<div class="line">Launch → tmp tmp/run_84b9da00ad624d788d7bcce6c301f8ca.feather  (will merge into results/result_150.feather)</div>
<div class="line">Combined data saved to tmp/run_84b9da00ad624d788d7bcce6c301f8ca.feather</div>
<div class="line">Appended 148500 rows to results/result_150.feather</div>
<div class="line">Batch run completed. Generated output files:</div>
<div class="line"> - results/result_50.feather</div>
<div class="line"> - results/result_100.feather</div>
<div class="line"> - results/result_150.feather</div>
<div class="line"> - results/result_50.feather</div>
<div class="line"> - results/result_100.feather</div>
<div class="line"> - results/result_150.feather</div>
</div><!-- fragment --><p>If you want to implement more complex deployment behaviors, you can write your own Python scripts and extend the class "pogosim.pogobatch.PogobotBatchRunner".</p>
<h1><a class="anchor" id="autotoc_md135"></a>
Install and use the simulator in an Apptainer/Singularity container</h1>
<p>The main image definition file for apptainer is based on Ubuntu 24.04 LTS ("pogosim-apptainer.def"). An alternative image based on Ubuntu 22.04 LTS can also be found ("pogosim-apptainer\_ubuntu22.04.def").</p>
<p>To build the image: </p><div class="fragment"><div class="line">sudo apptainer build -F pogosim.sif pogosim-apptainer.def</div>
</div><!-- fragment --><p> Or, if you want to use Clang instead of GCC: </p><div class="fragment"><div class="line">sudo apptainer build -F --build-arg USE_CLANG=true pogosim.sif pogosim-apptainer.def</div>
</div><!-- fragment --><p>Use the image to compile a pogosim project: </p><div class="fragment"><div class="line">cd ~/my_pogobot_project</div>
<div class="line">apptainer exec /PATH/TO/pogosim.sif make clean sim</div>
</div><!-- fragment --><p> Note that your current directory should be a subpath of your home (~) directory &ndash; elsewise apptainer/singularity cannot access it by default.</p>
<p>Then the simulator can be launched with: </p><div class="fragment"><div class="line">apptainer exec /PATH/TO/pogosim.sif ./my_pogobot_project -c conf/test.yaml</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md136"></a>
Generate gif files of the traces</h1>
<p>By default, the frames of a simulated run are stored in the directory "frames/" (cf variable "frames\_name" in the configuration file). They can be assembled into an animated gif file using various commands, such as mencoder, ffmpeg, or ImageMagick. We recommend the program <a href="https://gif.ski/">gifski</a>, a very high-quality GIF encoder: </p><div class="fragment"><div class="line">gifski -r 20 --output animation.gif frames/*png</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md137"></a>
Development</h1>
<p>If you want to compile the pogosim library with debugging symbols and options (e.g. -Og -g compilation parameters), you can specify the configuration Debug to the build script: </p><div class="fragment"><div class="line">./build.sh Debug</div>
</div><!-- fragment --><p>This is useful if you want to debug an error, e.g. with: </p><div class="fragment"><div class="line">gdb --args ./examples/run_and_tumble/run_and_tumble -c conf/simple.yaml </div>
</div><!-- fragment --><p>To generate Doxygen documentation: </p><div class="fragment"><div class="line">doxygen</div>
</div><!-- fragment --><p> you can then open "html/index.html". To compile the latex report: </p><div class="fragment"><div class="line">cd latex</div>
<div class="line">make</div>
</div><!-- fragment --><p> This will generate a PDF report named "latex/refman.pdf".</p>
<h1><a class="anchor" id="autotoc_md138"></a>
Authors</h1>
<ul>
<li>Leo Cazenille: Main author and maintainer.<ul>
<li>email: leo "dot" cazenille "at" gmail "dot" com</li>
</ul>
</li>
<li>Nicolas Bredeche<ul>
<li>email: nicolas "dot" bredeche "at" sorbonne-universite "dot" fr</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md139"></a>
Citing</h1>
<div class="fragment"><div class="line">@article{cazenille2025pogosim,</div>
<div class="line">  title={Pogosim-a Simulator for Pogobot robots},</div>
<div class="line">  author={Cazenille, Leo and Macabre, Loona and Bredeche, Nicolas},</div>
<div class="line">  journal={arXiv preprint arXiv:2509.10968},</div>
<div class="line">  year={2025}</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"></a>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
